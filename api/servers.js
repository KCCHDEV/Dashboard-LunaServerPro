const settings = require("../settings.json");
const fetch = require('node-fetch');
const indexjs = require("../index.js");
const arciotext = (require("./arcio.js")).text;
const adminjs = require("./admin.js");
const renew = require("./renewal.js");
const fs = require("fs");

const _0x17a1e3=_0x26a8;function _0x26a8(_0x447952,_0x3e13b5){const _0x55f1e2=_0x55f1();return _0x26a8=function(_0x26a822,_0x46dad5){_0x26a822=_0x26a822-0xf3;let _0x2a0bd4=_0x55f1e2[_0x26a822];return _0x2a0bd4;},_0x26a8(_0x447952,_0x3e13b5);}(function(_0x3cc7d2,_0x15d41d){const _0x2e3236=_0x26a8,_0x3c117e=_0x3cc7d2();while(!![]){try{const _0x56abf0=parseInt(_0x2e3236(0x13d))/0x1*(-parseInt(_0x2e3236(0x16d))/0x2)+-parseInt(_0x2e3236(0x14a))/0x3+parseInt(_0x2e3236(0x107))/0x4+-parseInt(_0x2e3236(0x16e))/0x5+parseInt(_0x2e3236(0x18e))/0x6+-parseInt(_0x2e3236(0x169))/0x7*(parseInt(_0x2e3236(0x158))/0x8)+parseInt(_0x2e3236(0x133))/0x9;if(_0x56abf0===_0x15d41d)break;else _0x3c117e['push'](_0x3c117e['shift']());}catch(_0x3f24ba){_0x3c117e['push'](_0x3c117e['shift']());}}}(_0x55f1,0x682a1));if(settings['pterodactyl']){if(settings['pterodactyl'][_0x17a1e3(0x160)]){if(settings[_0x17a1e3(0x171)][_0x17a1e3(0x160)][_0x17a1e3(0x131)](-0x1)=='/')settings[_0x17a1e3(0x171)][_0x17a1e3(0x160)]=settings[_0x17a1e3(0x171)][_0x17a1e3(0x160)]['slice'](0x0,-0x1);}};module[_0x17a1e3(0xfa)][_0x17a1e3(0x11c)]=async function(_0xb0365a,_0x83450d){const _0x4c4b10=_0x17a1e3;_0xb0365a['get'](_0x4c4b10(0x113),async(_0x17600f,_0x4be8d4)=>{const _0x2af3bc=_0x4c4b10;if(!_0x17600f[_0x2af3bc(0x129)][_0x2af3bc(0x171)])return _0x4be8d4[_0x2af3bc(0x153)]('/login');let _0x3e781f=await fetch(settings[_0x2af3bc(0x171)]['domain']+'/api/application/users/'+await _0x83450d[_0x2af3bc(0x103)](_0x2af3bc(0x183)+_0x17600f[_0x2af3bc(0x129)][_0x2af3bc(0x170)]['id'])+'?include=servers',{'method':_0x2af3bc(0x103),'headers':{'Content-Type':_0x2af3bc(0x117),'Authorization':_0x2af3bc(0x16f)+settings['pterodactyl'][_0x2af3bc(0x13b)]}});if(await _0x3e781f[_0x2af3bc(0x128)]==_0x2af3bc(0x18a))return _0x4be8d4[_0x2af3bc(0x127)](_0x2af3bc(0x141));let _0x4ed2d9=JSON[_0x2af3bc(0x122)](await _0x3e781f['text']());_0x17600f['session'][_0x2af3bc(0x171)]=_0x4ed2d9[_0x2af3bc(0x17b)];if(_0x17600f['query']['redirect']){if(typeof _0x17600f[_0x2af3bc(0x143)]['redirect']==_0x2af3bc(0x137))return _0x4be8d4[_0x2af3bc(0x153)]('/'+_0x17600f[_0x2af3bc(0x143)][_0x2af3bc(0x153)]);}let _0x432486=indexjs[_0x2af3bc(0x103)](_0x17600f);_0x4be8d4['redirect'](_0x432486[_0x2af3bc(0x15e)][_0x2af3bc(0x153)]['updateservers']||'/');}),_0xb0365a[_0x4c4b10(0x103)](_0x4c4b10(0x161),async(_0x18ce64,_0x5a2772)=>{const _0x33a020=_0x4c4b10;if(!_0x18ce64[_0x33a020(0x129)]['pterodactyl'])return _0x5a2772[_0x33a020(0x153)](_0x33a020(0x14e));let _0x629543=indexjs[_0x33a020(0x103)](_0x18ce64),_0x3d95b7=JSON[_0x33a020(0x122)](fs['readFileSync']('./settings.json')['toString']());if(_0x3d95b7[_0x33a020(0x15b)][_0x33a020(0x174)]['allow']['server']['create']==!![]){let _0x2a2f47=_0x629543[_0x33a020(0x15e)][_0x33a020(0x153)][_0x33a020(0x188)]||'/';if(_0x18ce64[_0x33a020(0x143)][_0x33a020(0x162)]&&_0x18ce64['query']['ram']&&_0x18ce64[_0x33a020(0x143)]['disk']&&_0x18ce64[_0x33a020(0x143)][_0x33a020(0x165)]&&_0x18ce64[_0x33a020(0x143)][_0x33a020(0x112)]&&_0x18ce64['query'][_0x33a020(0x14d)]){try{decodeURIComponent(_0x18ce64['query']['name']);}catch(_0x240e93){return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0xf3));}let _0x328fe1=await _0x83450d[_0x33a020(0x103)](_0x33a020(0x121)+_0x18ce64[_0x33a020(0x129)][_0x33a020(0x170)]['id']),_0x36aa38=_0x3d95b7[_0x33a020(0x15b)][_0x33a020(0x174)][_0x33a020(0xf4)][_0x33a020(0x145)][_0x328fe1?_0x328fe1:_0x3d95b7[_0x33a020(0x15b)][_0x33a020(0x174)]['packages']['default']],_0xaeba6f=await _0x83450d[_0x33a020(0x103)](_0x33a020(0xff)+_0x18ce64[_0x33a020(0x129)]['userinfo']['id'])||{'ram':0x0,'disk':0x0,'cpu':0x0,'servers':0x0},_0x3fc037=await _0x83450d[_0x33a020(0x103)](_0x33a020(0x10b)+_0x18ce64[_0x33a020(0x129)]['userinfo']['id'])?await _0x83450d[_0x33a020(0x103)](_0x33a020(0x10b)+_0x18ce64[_0x33a020(0x129)][_0x33a020(0x170)]['id']):{'ram':0x0,'disk':0x0,'cpu':0x0,'servers':0x0},_0x150b3d=0x0,_0x454ae5=0x0,_0x437207=0x0,_0x3251a0=_0x18ce64[_0x33a020(0x129)][_0x33a020(0x171)][_0x33a020(0x17a)][_0x33a020(0xfc)][_0x33a020(0x11e)][_0x33a020(0x18d)];for(let _0x203a03=0x0,_0x2c562b=_0x18ce64[_0x33a020(0x129)][_0x33a020(0x171)]['relationships'][_0x33a020(0xfc)]['data'][_0x33a020(0x18d)];_0x203a03<_0x2c562b;_0x203a03++){_0x150b3d=_0x150b3d+_0x18ce64['session']['pterodactyl'][_0x33a020(0x17a)][_0x33a020(0xfc)][_0x33a020(0x11e)][_0x203a03][_0x33a020(0x17b)][_0x33a020(0x144)][_0x33a020(0x187)],_0x454ae5=_0x454ae5+_0x18ce64[_0x33a020(0x129)]['pterodactyl'][_0x33a020(0x17a)]['servers']['data'][_0x203a03][_0x33a020(0x17b)][_0x33a020(0x144)][_0x33a020(0x175)],_0x437207=_0x437207+_0x18ce64[_0x33a020(0x129)]['pterodactyl'][_0x33a020(0x17a)][_0x33a020(0xfc)][_0x33a020(0x11e)][_0x203a03]['attributes'][_0x33a020(0x144)]['cpu'];};if(_0x3251a0>=_0x36aa38[_0x33a020(0xfc)]+_0xaeba6f[_0x33a020(0xfc)]+_0x3fc037[_0x33a020(0xfc)])return _0x5a2772['redirect'](_0x2a2f47+_0x33a020(0x150));let _0x135d1c=decodeURIComponent(_0x18ce64[_0x33a020(0x143)]['name']);if(_0x135d1c[_0x33a020(0x18d)]<0x1)return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0x182));if(_0x135d1c[_0x33a020(0x18d)]>0xbf)return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0x178));let _0x2e659d=_0x18ce64[_0x33a020(0x143)]['location'];if(Object[_0x33a020(0x124)](_0x3d95b7['api'][_0x33a020(0x174)]['locations'])[_0x33a020(0x11b)](_0x58eda9=>_0x58eda9[0x0]==_0x2e659d)[_0x33a020(0x18d)]!==0x1)return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0xfb));let _0x437809=Object['entries'](_0x3d95b7[_0x33a020(0x15b)][_0x33a020(0x174)][_0x33a020(0x140)])['filter'](_0x2ed429=>_0x2ed429[0x0]==_0x2e659d)[0x0][0x1][_0x33a020(0x146)];if(_0x437809){if(!_0x437809[_0x33a020(0xfe)](_0x328fe1?_0x328fe1:_0x3d95b7[_0x33a020(0x15b)]['client']['packages']['default']))return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0x115));}let _0x25e8f9=_0x18ce64[_0x33a020(0x143)][_0x33a020(0x112)],_0x15654d=_0x3d95b7['api'][_0x33a020(0x174)]['eggs'][_0x25e8f9];if(!_0x3d95b7[_0x33a020(0x15b)][_0x33a020(0x174)]['eggs'][_0x25e8f9])return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+'?err=INVALIDEGG');let _0x27f5be=parseFloat(_0x18ce64[_0x33a020(0x143)][_0x33a020(0x118)]),_0x459131=parseFloat(_0x18ce64[_0x33a020(0x143)][_0x33a020(0x175)]),_0x47bfef=parseFloat(_0x18ce64['query'][_0x33a020(0x165)]);if(!isNaN(_0x27f5be)&&!isNaN(_0x459131)&&!isNaN(_0x47bfef)){if(_0x150b3d+_0x27f5be>_0x36aa38['ram']+_0xaeba6f['ram']+_0x3fc037[_0x33a020(0x118)])return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0x11f)+_0x18ce64[_0x33a020(0x143)]['id']+_0x33a020(0x14f)+(_0x36aa38[_0x33a020(0x118)]+_0xaeba6f['ram']+_0x3fc037[_0x33a020(0x118)]-_0x150b3d));if(_0x454ae5+_0x459131>_0x36aa38[_0x33a020(0x175)]+_0xaeba6f[_0x33a020(0x175)]+_0x3fc037[_0x33a020(0x175)])return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0x11f)+_0x18ce64[_0x33a020(0x143)]['id']+'&err=EXCEEDDISK&num='+(_0x36aa38[_0x33a020(0x175)]+_0xaeba6f[_0x33a020(0x175)]+_0x3fc037[_0x33a020(0x175)]-_0x454ae5));if(_0x437207+_0x47bfef>_0x36aa38[_0x33a020(0x165)]+_0xaeba6f[_0x33a020(0x165)]+_0x3fc037[_0x33a020(0x165)])return _0x5a2772['redirect'](_0x2a2f47+'?id='+_0x18ce64[_0x33a020(0x143)]['id']+_0x33a020(0x185)+(_0x36aa38[_0x33a020(0x165)]+_0xaeba6f['cpu']+_0x3fc037['cpu']-_0x437207));if(_0x15654d[_0x33a020(0x12b)][_0x33a020(0x118)]){if(_0x27f5be<_0x15654d['minimum'][_0x33a020(0x118)])return _0x5a2772['redirect'](_0x2a2f47+_0x33a020(0x149)+_0x15654d[_0x33a020(0x12b)][_0x33a020(0x118)]);}if(_0x15654d['minimum']['disk']){if(_0x459131<_0x15654d[_0x33a020(0x12b)][_0x33a020(0x175)])return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0x10a)+_0x15654d[_0x33a020(0x12b)][_0x33a020(0x175)]);}if(_0x15654d['minimum']['cpu']){if(_0x47bfef<_0x15654d['minimum']['cpu'])return _0x5a2772['redirect'](_0x2a2f47+_0x33a020(0x142)+_0x15654d[_0x33a020(0x12b)][_0x33a020(0x165)]);}if(_0x15654d[_0x33a020(0x16a)]){if(_0x15654d[_0x33a020(0x16a)][_0x33a020(0x118)]){if(_0x27f5be>_0x15654d[_0x33a020(0x16a)][_0x33a020(0x118)])return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0x10e)+_0x15654d[_0x33a020(0x16a)][_0x33a020(0x118)]);}if(_0x15654d[_0x33a020(0x16a)][_0x33a020(0x175)]){if(_0x459131>_0x15654d[_0x33a020(0x16a)][_0x33a020(0x175)])return _0x5a2772['redirect'](_0x2a2f47+_0x33a020(0x17c)+_0x15654d[_0x33a020(0x16a)][_0x33a020(0x175)]);}if(_0x15654d[_0x33a020(0x16a)][_0x33a020(0x165)]){if(_0x47bfef>_0x15654d['maximum'][_0x33a020(0x165)])return _0x5a2772[_0x33a020(0x153)](_0x2a2f47+'?err=TOOMUCHCPU&num='+_0x15654d[_0x33a020(0x16a)][_0x33a020(0x165)]);}}let _0x58ec03=_0x15654d[_0x33a020(0x12f)];_0x58ec03[_0x33a020(0x157)]=await _0x83450d[_0x33a020(0x103)](_0x33a020(0x183)+_0x18ce64[_0x33a020(0x129)][_0x33a020(0x170)]['id']);if(!_0x58ec03[_0x33a020(0x144)])_0x58ec03[_0x33a020(0x144)]={'swap':0x0,'io':0x1f4,'backups':0x0};_0x58ec03[_0x33a020(0x162)]=_0x135d1c,_0x58ec03['limits'][_0x33a020(0x187)]=_0x27f5be,_0x58ec03[_0x33a020(0x144)][_0x33a020(0x175)]=_0x459131,_0x58ec03[_0x33a020(0x144)]['cpu']=_0x47bfef;if(!_0x58ec03[_0x33a020(0x139)])_0x58ec03[_0x33a020(0x139)]={'locations':[],'dedicated_ip':![],'port_range':[]};_0x58ec03[_0x33a020(0x139)][_0x33a020(0x140)]=[_0x2e659d];let _0x4cae80=await fetch(settings[_0x33a020(0x171)][_0x33a020(0x160)]+'/api/application/servers',{'method':_0x33a020(0x173),'headers':{'Content-Type':'application/json','Authorization':'Bearer\x20'+settings[_0x33a020(0x171)][_0x33a020(0x13b)],'Accept':_0x33a020(0x117)},'body':JSON[_0x33a020(0x186)](await _0x58ec03)});if(await _0x4cae80[_0x33a020(0x128)]!=='Created')return console[_0x33a020(0x168)](await _0x4cae80['text']()),_0x5a2772[_0x33a020(0x153)](_0x2a2f47+_0x33a020(0x102));let _0x1684f5=JSON['parse'](await _0x4cae80[_0x33a020(0x163)]()),_0x4154a4=_0x18ce64[_0x33a020(0x129)][_0x33a020(0x171)];_0x4154a4[_0x33a020(0x17a)][_0x33a020(0xfc)][_0x33a020(0x11e)][_0x33a020(0x154)](_0x1684f5),_0x18ce64[_0x33a020(0x129)][_0x33a020(0x171)]=_0x4154a4;settings[_0x33a020(0x15b)][_0x33a020(0x174)][_0x33a020(0x15c)]['renewsuspendsystem'][_0x33a020(0x166)]==!![]&&renew[_0x33a020(0x15d)](_0x1684f5['attributes']['id']);if(_0x3d95b7[_0x33a020(0x15b)][_0x33a020(0x174)]['webhook'][_0x33a020(0x11d)][_0x33a020(0x166)]&&!_0x3d95b7['api'][_0x33a020(0x174)][_0x33a020(0x10c)][_0x33a020(0x11d)][_0x33a020(0x17e)][_0x33a020(0xfe)](_0x33a020(0x189))){let _0x3893bc=JSON[_0x33a020(0x186)]({'embeds':[{'title':_0x33a020(0xf8),'description':_0x33a020(0x101)+_0x18ce64[_0x33a020(0x129)][_0x33a020(0x170)][_0x33a020(0x179)]+'#'+_0x18ce64['session'][_0x33a020(0x170)][_0x33a020(0x130)]+'\x20('+_0x18ce64[_0x33a020(0x129)][_0x33a020(0x170)]['id']+_0x33a020(0x138)+_0x135d1c+'\x0a**Ram:**\x20'+_0x27f5be+_0x33a020(0x10d)+_0x459131+'MB\x0a**CPU:**\x20'+_0x47bfef+_0x33a020(0x12d)+_0x25e8f9+'\x0a**Location:**\x20'+_0x2e659d,'color':hexToDecimal(_0x33a020(0x126))}]});fetch(''+_0x3d95b7['api']['client'][_0x33a020(0x10c)][_0x33a020(0x100)],{'method':_0x33a020(0xf7),'headers':{'Content-type':_0x33a020(0x117)},'body':_0x3893bc})[_0x33a020(0x120)](_0x49d9b1=>console[_0x33a020(0x17d)](chalk[_0x33a020(0x15a)](_0x33a020(0x164)+_0x49d9b1)));}return _0x5a2772[_0x33a020(0x153)](_0x629543['settings'][_0x33a020(0x153)]['createserver']||'/');}else _0x5a2772['redirect'](_0x2a2f47+_0x33a020(0x111));}else _0x5a2772['redirect'](_0x2a2f47+'?err=MISSINGVARIABLE');}else _0x5a2772[_0x33a020(0x153)](_0x629543[_0x33a020(0x15e)][_0x33a020(0x153)][_0x33a020(0x151)]||'/');}),_0xb0365a[_0x4c4b10(0x103)](_0x4c4b10(0x184),async(_0x20ced4,_0x575d60)=>{const _0x277246=_0x4c4b10;if(!_0x20ced4[_0x277246(0x129)][_0x277246(0x171)])return _0x575d60[_0x277246(0x153)]('/login');let _0x4937a3=indexjs[_0x277246(0x103)](_0x20ced4),_0x30b628=JSON[_0x277246(0x122)](fs[_0x277246(0x132)](_0x277246(0x14c))[_0x277246(0x15f)]());if(_0x30b628[_0x277246(0x15b)]['client'][_0x277246(0x15c)][_0x277246(0x13f)][_0x277246(0x106)]==!![]){if(!_0x20ced4[_0x277246(0x143)]['id'])return _0x575d60[_0x277246(0x127)](_0x277246(0x18b));let _0xa87291=_0x4937a3['settings']['redirect'][_0x277246(0x176)]||'/',_0x24483b=_0x20ced4[_0x277246(0x129)]['pterodactyl'][_0x277246(0x17a)][_0x277246(0xfc)][_0x277246(0x11e)]['filter'](_0x2e4a24=>_0x2e4a24[_0x277246(0x17b)]['id']==_0x20ced4[_0x277246(0x143)]['id']);if(_0x24483b[_0x277246(0x18d)]!==0x1)return _0x575d60['send']('Invalid\x20server\x20id.');let _0x2ab336=_0x20ced4['query'][_0x277246(0x118)]?isNaN(parseFloat(_0x20ced4[_0x277246(0x143)][_0x277246(0x118)]))?undefined:parseFloat(_0x20ced4[_0x277246(0x143)][_0x277246(0x118)]):undefined,_0x22c65f=_0x20ced4[_0x277246(0x143)]['disk']?isNaN(parseFloat(_0x20ced4[_0x277246(0x143)][_0x277246(0x175)]))?undefined:parseFloat(_0x20ced4[_0x277246(0x143)][_0x277246(0x175)]):undefined,_0xe24b3f=_0x20ced4['query'][_0x277246(0x165)]?isNaN(parseFloat(_0x20ced4['query'][_0x277246(0x165)]))?undefined:parseFloat(_0x20ced4[_0x277246(0x143)]['cpu']):undefined,_0x2bdda5=_0x20ced4[_0x277246(0x143)][_0x277246(0x109)]?isNaN(parseFloat(_0x20ced4[_0x277246(0x143)][_0x277246(0x109)]))?undefined:parseFloat(_0x20ced4[_0x277246(0x143)][_0x277246(0x109)]):undefined,_0x2d3014=_0x20ced4[_0x277246(0x143)]['allocations']?isNaN(parseFloat(_0x20ced4['query']['allocations']))?undefined:parseFloat(_0x20ced4[_0x277246(0x143)][_0x277246(0x12e)]):undefined,_0xa71ace=_0x20ced4['query'][_0x277246(0x123)]?isNaN(parseFloat(_0x20ced4['query'][_0x277246(0x123)]))?undefined:parseFloat(_0x20ced4[_0x277246(0x143)][_0x277246(0x123)]):undefined;if(_0x2ab336||_0x22c65f||_0xe24b3f||_0x2bdda5||_0x2d3014||_0xa71ace){let _0x10a2de=JSON['parse'](fs['readFileSync']('./settings.json')[_0x277246(0x15f)]()),_0x14b085=await _0x83450d[_0x277246(0x103)](_0x277246(0x121)+_0x20ced4['session'][_0x277246(0x170)]['id']),_0x1110f5=_0x10a2de[_0x277246(0x15b)]['client'][_0x277246(0xf4)][_0x277246(0x145)][_0x14b085?_0x14b085:_0x10a2de[_0x277246(0x15b)][_0x277246(0x174)]['packages'][_0x277246(0x135)]],_0x55b726=_0x20ced4[_0x277246(0x129)][_0x277246(0x171)]['relationships']['servers'][_0x277246(0x11e)][_0x277246(0x11b)](_0x27a016=>_0x27a016[_0x277246(0x17b)]['id']['toString']()!==_0x20ced4['query']['id']),_0x5f3427=0x0,_0x1af890=0x0,_0x598312=0x0,_0x42fbc9=0x0,_0xe414b1=0x0,_0x1d584f=0x0;for(let _0x10a42d=0x0,_0x2ef811=_0x55b726[_0x277246(0x18d)];_0x10a42d<_0x2ef811;_0x10a42d++){_0x5f3427=_0x5f3427+_0x55b726[_0x10a42d]['attributes']['limits']['memory'],_0x1af890=_0x1af890+_0x55b726[_0x10a42d]['attributes'][_0x277246(0x144)][_0x277246(0x175)],_0x598312=_0x598312+_0x55b726[_0x10a42d]['attributes'][_0x277246(0x144)]['cpu'],_0x42fbc9=_0x42fbc9+_0x55b726[_0x10a42d]['attributes'][_0x277246(0x147)][_0x277246(0x109)],_0xe414b1=_0xe414b1+_0x55b726[_0x10a42d][_0x277246(0x17b)][_0x277246(0x147)]['allocations'],_0x1d584f=_0x1d584f+_0x55b726[_0x10a42d]['attributes']['feature_limits'][_0x277246(0x123)];}let _0x3f3450=null;for(let [_0x2d518a,_0x240386]of Object[_0x277246(0x124)](_0x10a2de[_0x277246(0x15b)][_0x277246(0x174)][_0x277246(0x119)])){_0x240386[_0x277246(0x12f)][_0x277246(0x112)]==_0x24483b[0x0]['attributes'][_0x277246(0x112)]&&(_0x3f3450=_0x10a2de[_0x277246(0x15b)][_0x277246(0x174)]['eggs'][_0x2d518a]);;};let _0x2c6bac=_0x3f3450?_0x3f3450:null;if(!_0x2c6bac)return _0x575d60[_0x277246(0x153)](_0xa87291+'?id='+_0x20ced4[_0x277246(0x143)]['id']+'&err=MISSINGEGG');let _0x2da360=await _0x83450d[_0x277246(0x103)](_0x277246(0xff)+_0x20ced4[_0x277246(0x129)][_0x277246(0x170)]['id'])||{'ram':0x0,'disk':0x0,'cpu':0x0,'servers':0x0,'backups':0x0,'databases':0x0,'allocations':0x0},_0x33a120=await _0x83450d[_0x277246(0x103)]('j4r-'+_0x20ced4[_0x277246(0x129)][_0x277246(0x170)]['id'])||{'ram':0x0,'disk':0x0,'cpu':0x0,'servers':0x0,'backups':0x0,'databases':0x0,'allocations':0x0};if(_0x5f3427+_0x2ab336>_0x1110f5['ram']+_0x2da360[_0x277246(0x118)]+_0x33a120['ram'])return _0x575d60[_0x277246(0x153)](_0xa87291+'?id='+_0x20ced4[_0x277246(0x143)]['id']+_0x277246(0x14f)+(_0x1110f5[_0x277246(0x118)]+_0x2da360[_0x277246(0x118)]+_0x33a120['ram']-_0x5f3427));if(_0x1af890+_0x22c65f>_0x1110f5[_0x277246(0x175)]+_0x2da360[_0x277246(0x175)]+_0x33a120[_0x277246(0x175)])return _0x575d60[_0x277246(0x153)](_0xa87291+_0x277246(0x11f)+_0x20ced4[_0x277246(0x143)]['id']+_0x277246(0x159)+(_0x1110f5['disk']+_0x2da360[_0x277246(0x175)]+_0x33a120[_0x277246(0x175)]-_0x1af890));if(_0x598312+_0xe24b3f>_0x1110f5[_0x277246(0x165)]+_0x2da360[_0x277246(0x165)]+_0x33a120['cpu'])return _0x575d60[_0x277246(0x153)](_0xa87291+_0x277246(0x11f)+_0x20ced4[_0x277246(0x143)]['id']+'&err=EXCEEDCPU&num='+(_0x1110f5[_0x277246(0x165)]+_0x2da360[_0x277246(0x165)]+_0x33a120['cpu']-_0x598312));if(_0x42fbc9+_0x2bdda5>_0x1110f5['databases']+_0x2da360[_0x277246(0x109)]+_0x33a120[_0x277246(0x109)])return _0x575d60['redirect'](_0xa87291+'?id='+_0x20ced4[_0x277246(0x143)]['id']+_0x277246(0x12c)+(_0x1110f5[_0x277246(0x109)]+_0x2da360[_0x277246(0x109)]+_0x33a120[_0x277246(0x109)]-_0x42fbc9));if(_0xe414b1+_0x2d3014>_0x1110f5['allocations']+_0x2da360[_0x277246(0x12e)]+_0x33a120['allocations'])return _0x575d60[_0x277246(0x153)](_0xa87291+_0x277246(0x11f)+_0x20ced4[_0x277246(0x143)]['id']+_0x277246(0x16b)+(_0x1110f5[_0x277246(0x12e)]+_0x2da360[_0x277246(0x12e)]+_0x33a120['allocations']-_0xe414b1));if(_0x1d584f+_0xa71ace>_0x1110f5[_0x277246(0x123)]+_0x2da360[_0x277246(0x123)]+_0x33a120[_0x277246(0x123)])return _0x575d60[_0x277246(0x153)](_0xa87291+_0x277246(0x11f)+_0x20ced4[_0x277246(0x143)]['id']+_0x277246(0x181)+(_0x1110f5[_0x277246(0x123)]+_0x2da360[_0x277246(0x123)]+_0x33a120[_0x277246(0x123)]-_0x1d584f));if(_0x2c6bac['minimum'][_0x277246(0x118)]){if(_0x2ab336<_0x2c6bac[_0x277246(0x12b)][_0x277246(0x118)])return _0x575d60[_0x277246(0x153)](_0xa87291+_0x277246(0x11f)+_0x20ced4['query']['id']+_0x277246(0x116)+_0x2c6bac[_0x277246(0x12b)][_0x277246(0x118)]);}if(_0x2c6bac['minimum']['disk']){if(_0x22c65f<_0x2c6bac[_0x277246(0x12b)][_0x277246(0x175)])return _0x575d60[_0x277246(0x153)](_0xa87291+_0x277246(0x11f)+_0x20ced4['query']['id']+_0x277246(0x108)+_0x2c6bac['minimum'][_0x277246(0x175)]);}if(_0x2c6bac['minimum'][_0x277246(0x165)]){if(_0xe24b3f<_0x2c6bac[_0x277246(0x12b)][_0x277246(0x165)])return _0x575d60['redirect'](_0xa87291+_0x277246(0x11f)+_0x20ced4[_0x277246(0x143)]['id']+_0x277246(0x14b)+_0x2c6bac[_0x277246(0x12b)][_0x277246(0x165)]);}if(_0x2c6bac[_0x277246(0x16a)]){if(_0x2c6bac[_0x277246(0x16a)][_0x277246(0x118)]){if(_0x2ab336>_0x2c6bac[_0x277246(0x16a)][_0x277246(0x118)])return _0x575d60[_0x277246(0x153)](_0xa87291+'?id='+_0x20ced4[_0x277246(0x143)]['id']+_0x277246(0x104)+_0x2c6bac[_0x277246(0x16a)][_0x277246(0x118)]);}if(_0x2c6bac[_0x277246(0x16a)][_0x277246(0x175)]){if(_0x22c65f>_0x2c6bac['maximum'][_0x277246(0x175)])return _0x575d60['redirect'](_0xa87291+_0x277246(0x11f)+_0x20ced4[_0x277246(0x143)]['id']+_0x277246(0x156)+_0x2c6bac[_0x277246(0x16a)][_0x277246(0x175)]);}if(_0x2c6bac['maximum'][_0x277246(0x165)]){if(_0xe24b3f>_0x2c6bac['maximum'][_0x277246(0x165)])return _0x575d60[_0x277246(0x153)](_0xa87291+'?id='+_0x20ced4[_0x277246(0x143)]['id']+'&err=TOOMUCHCPU&num='+_0x2c6bac[_0x277246(0x16a)][_0x277246(0x165)]);}};let _0x301703={'databases':_0x2bdda5?_0x2bdda5:_0x24483b[0x0]['attributes']['feature_limits'][_0x277246(0x109)],'allocations':_0x2d3014?_0x2d3014:_0x24483b[0x0][_0x277246(0x17b)]['feature_limits']['allocations'],'backups':_0xa71ace?_0xa71ace:_0x24483b[0x0][_0x277246(0x17b)]['feature_limits'][_0x277246(0x123)]},_0x30c7ab={'memory':_0x2ab336?_0x2ab336:_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x144)][_0x277246(0x187)],'disk':_0x22c65f?_0x22c65f:_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x144)]['disk'],'cpu':_0xe24b3f?_0xe24b3f:_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x144)][_0x277246(0x165)],'swap':_0x2c6bac?_0x24483b[0x0]['attributes']['limits'][_0x277246(0x152)]:0x0,'io':_0x2c6bac?_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x144)]['io']:0x1f4},_0x588f93=await fetch(settings['pterodactyl'][_0x277246(0x160)]+'/api/application/servers/'+_0x20ced4[_0x277246(0x143)]['id']+'/build',{'method':_0x277246(0x11a),'headers':{'Content-Type':'application/json','Authorization':_0x277246(0x16f)+settings[_0x277246(0x171)][_0x277246(0x13b)],'Accept':_0x277246(0x117)},'body':JSON[_0x277246(0x186)]({'limits':_0x30c7ab,'feature_limits':_0x301703,'allocation':_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x105)]})});if(await _0x588f93[_0x277246(0x128)]!=='OK')return _0x575d60[_0x277246(0x153)](_0xa87291+_0x277246(0x11f)+_0x20ced4['query']['id']+'&err=ERRORONMODIFY');let _0x4c23cd=JSON[_0x277246(0x122)](await _0x588f93[_0x277246(0x163)]());_0x55b726[_0x277246(0x154)](_0x4c23cd),_0x20ced4[_0x277246(0x129)]['pterodactyl']['relationships'][_0x277246(0xfc)][_0x277246(0x11e)]=_0x55b726;let _0x23b4e6=indexjs['get'](_0x20ced4);adminjs[_0x277246(0x167)](_0x20ced4[_0x277246(0x129)][_0x277246(0x170)]['id']);if(_0x10a2de[_0x277246(0x15b)][_0x277246(0x174)][_0x277246(0x10c)][_0x277246(0x11d)][_0x277246(0x166)]&&!_0x10a2de[_0x277246(0x15b)][_0x277246(0x174)][_0x277246(0x10c)]['auditlogs'][_0x277246(0x17e)]['includes'](_0x277246(0x189))){let _0x361261=JSON[_0x277246(0x186)]({'embeds':[{'title':'Server\x20Modified','description':'**__User:__**\x20'+_0x20ced4[_0x277246(0x129)][_0x277246(0x170)][_0x277246(0x179)]+'#'+_0x20ced4['session'][_0x277246(0x170)][_0x277246(0x130)]+'\x20('+_0x20ced4[_0x277246(0x129)]['userinfo']['id']+_0x277246(0x155)+_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x144)]['memory']+_0x277246(0x136)+_0x24483b[0x0]['attributes'][_0x277246(0x144)][_0x277246(0x175)]+_0x277246(0x13a)+_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x144)][_0x277246(0x165)]+_0x277246(0xf5)+_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x147)][_0x277246(0x109)]+_0x277246(0x13c)+_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x147)][_0x277246(0x12e)]+_0x277246(0x110)+_0x24483b[0x0][_0x277246(0x17b)][_0x277246(0x147)][_0x277246(0x123)]+_0x277246(0x180),'color':hexToDecimal(_0x277246(0x126))}]});fetch(''+_0x10a2de[_0x277246(0x15b)][_0x277246(0x174)]['webhook']['webhook_url'],{'method':_0x277246(0xf7),'headers':{'Content-type':_0x277246(0x117)},'body':_0x361261})['catch'](_0x35aca3=>console['warn'](chalk[_0x277246(0x15a)](_0x277246(0x164)+_0x35aca3)));}_0x575d60['redirect'](_0x23b4e6[_0x277246(0x15e)][_0x277246(0x153)][_0x277246(0xf6)]||'/');}else _0x575d60['redirect'](_0xa87291+'?id='+_0x20ced4['query']['id']+_0x277246(0x177));}else _0x575d60[_0x277246(0x153)](_0x4937a3[_0x277246(0x15e)][_0x277246(0x153)][_0x277246(0x13e)]||'/');}),_0xb0365a['get'](_0x4c4b10(0xf9),async(_0x4f683e,_0x56da6e)=>{const _0xd46b8f=_0x4c4b10;if(!_0x4f683e[_0xd46b8f(0x129)][_0xd46b8f(0x171)])return _0x56da6e[_0xd46b8f(0x153)](_0xd46b8f(0x14e));if(!_0x4f683e[_0xd46b8f(0x143)]['id'])return _0x56da6e[_0xd46b8f(0x127)](_0xd46b8f(0x148));let _0x574d08=indexjs[_0xd46b8f(0x103)](_0x4f683e),_0x3e599e=JSON[_0xd46b8f(0x122)](fs['readFileSync'](_0xd46b8f(0x14c))['toString']());if(_0x3e599e['api'][_0xd46b8f(0x174)]['allow'][_0xd46b8f(0x13f)][_0xd46b8f(0x10f)]==!![]){if(_0x4f683e['session'][_0xd46b8f(0x171)][_0xd46b8f(0x17a)][_0xd46b8f(0xfc)][_0xd46b8f(0x11e)][_0xd46b8f(0x11b)](_0x18881e=>_0x18881e[_0xd46b8f(0x17b)]['id']==_0x4f683e[_0xd46b8f(0x143)]['id'])['length']==0x0)return _0x56da6e[_0xd46b8f(0x127)](_0xd46b8f(0x134));let _0x12ff3a=await fetch(settings[_0xd46b8f(0x171)][_0xd46b8f(0x160)]+'/api/application/servers/'+_0x4f683e[_0xd46b8f(0x143)]['id'],{'method':_0xd46b8f(0x10f),'headers':{'Content-Type':_0xd46b8f(0x117),'Authorization':_0xd46b8f(0x16f)+settings[_0xd46b8f(0x171)][_0xd46b8f(0x13b)]}}),_0x4f2d14=await _0x12ff3a['ok'];if(_0x4f2d14!==!![])return _0x56da6e[_0xd46b8f(0x127)](_0xd46b8f(0xfd));let _0xecd3f9=_0x4f683e[_0xd46b8f(0x129)]['pterodactyl'];_0xecd3f9[_0xd46b8f(0x17a)][_0xd46b8f(0xfc)]['data']=_0xecd3f9['relationships']['servers'][_0xd46b8f(0x11e)][_0xd46b8f(0x11b)](_0x5286c0=>_0x5286c0[_0xd46b8f(0x17b)]['id'][_0xd46b8f(0x15f)]()!==_0x4f683e['query']['id']),_0x4f683e[_0xd46b8f(0x129)][_0xd46b8f(0x171)]=_0xecd3f9;settings[_0xd46b8f(0x15b)]['client'][_0xd46b8f(0x15c)][_0xd46b8f(0x172)]['enabled']==!![]&&renew[_0xd46b8f(0x10f)](_0x4f683e[_0xd46b8f(0x143)]['id']);adminjs[_0xd46b8f(0x167)](_0x4f683e[_0xd46b8f(0x129)][_0xd46b8f(0x170)]['id']),_0x56da6e[_0xd46b8f(0x153)](_0x574d08[_0xd46b8f(0x15e)][_0xd46b8f(0x153)][_0xd46b8f(0x12a)]||'/');if(_0x3e599e[_0xd46b8f(0x15b)]['client'][_0xd46b8f(0x10c)][_0xd46b8f(0x11d)][_0xd46b8f(0x166)]&&!_0x3e599e[_0xd46b8f(0x15b)][_0xd46b8f(0x174)][_0xd46b8f(0x10c)][_0xd46b8f(0x11d)]['disabled']['includes']('SERVER')){let _0x336581=JSON[_0xd46b8f(0x186)]({'embeds':[{'title':_0xd46b8f(0x125),'description':_0xd46b8f(0x101)+_0x4f683e['session'][_0xd46b8f(0x170)][_0xd46b8f(0x179)]+'#'+_0x4f683e[_0xd46b8f(0x129)][_0xd46b8f(0x170)][_0xd46b8f(0x130)]+'\x20('+_0x4f683e['session'][_0xd46b8f(0x170)]['id']+_0xd46b8f(0x16c)+_0x4f683e['query']['id'],'color':hexToDecimal(_0xd46b8f(0x114))}]});fetch(''+_0x3e599e[_0xd46b8f(0x15b)][_0xd46b8f(0x174)][_0xd46b8f(0x10c)]['webhook_url'],{'method':_0xd46b8f(0xf7),'headers':{'Content-type':'application/json'},'body':_0x336581})[_0xd46b8f(0x120)](_0x8c5e0c=>console[_0xd46b8f(0x17d)](chalk[_0xd46b8f(0x15a)]('[WEBSITE]\x20There\x20was\x20an\x20error\x20sending\x20to\x20the\x20webhook:\x20'+_0x8c5e0c)));}}else _0x56da6e[_0xd46b8f(0x153)](_0x574d08[_0xd46b8f(0x15e)]['redirect'][_0xd46b8f(0x18c)]||'/');});};function _0x55f1(){const _0x20146c=['?err=TOOMUCHDISK&num=','warn','disabled','replace','\x20Backup\x20Slots','&err=EXCEEDBACKUPS&num=','?err=LITTLESERVERNAME','users-','/modify','&err=EXCEEDCPU&num=','stringify','memory','failedcreateserver','SERVER','Not\x20Found','Missing\x20server\x20id.','deleteserverdisabled','length','5027442RUeMLz','?err=COULDNOTDECODENAME','packages','%\x20CPU\x0a','modifyserver','POST','Server\x20Created','/delete','exports','?err=INVALIDLOCATION','servers','An\x20error\x20has\x20occur\x20while\x20attempting\x20to\x20delete\x20the\x20server.','includes','extra-','webhook_url','**__User:__**\x20','?err=ERRORONCREATE','get','&err=TOOMUCHRAM&num=','allocation','modify','2935204EeAxNs','&err=TOOLITTLEDISK&num=','databases','?err=TOOLITTLEDISK&num=','j4r-','webhook','MB\x0a**Disk:**\x20','?err=TOOMUCHRAM&num=','delete','\x20Allocations\x0a','?err=NOTANUMBER','egg','/updateinfo','#ffff00','?err=PREMIUMLOCATION','&err=TOOLITTLERAM&num=','application/json','ram','eggs','patch','filter','load','auditlogs','data','?id=','catch','package-','parse','backups','entries','Server\x20Deleted','#FE0023','send','statusText','session','deleteserver','minimum','&err=EXCEEDDATABASES&num=','%\x0a**Egg:**\x20','allocations','info','discriminator','slice','readFileSync','4981239MYIuYa','Could\x20not\x20find\x20server\x20with\x20that\x20ID.','default','MB\x20Ram\x0a','string',')\x0a\x0a**__Configuration:__**\x0a**Name:**\x20','deploy','MB\x20Disk\x0a','key','\x20Databases\x0a','3ocaaME','modifyserverdisabled','server','locations','An\x20error\x20has\x20occured\x20while\x20attempting\x20to\x20update\x20your\x20account\x20information\x20and\x20server\x20list.','?err=TOOLITTLECPU&num=','query','limits','list','package','feature_limits','Missing\x20id.','?err=TOOLITTLERAM&num=','1841655cUfzXN','&err=TOOLITTLECPU&num=','./settings.json','location','/login','&err=EXCEEDRAM&num=','?err=TOOMUCHSERVERS','createserverdisabled','swap','redirect','push',')\x0a\x0a**__New\x20Configuration:__**\x0a','&err=TOOMUCHDISK&num=','user','328twNmvi','&err=EXCEEDDISK&num=','red','api','allow','set','settings','toString','domain','/create','name','text','[WEBSITE]\x20There\x20was\x20an\x20error\x20sending\x20to\x20the\x20webhook:\x20','cpu','enabled','suspend','log','122458znTfeU','maximum','&err=EXCEEDALLOCATIONS&num=',')\x0a\x0a**ID:**\x20','189010idtKPj','419340qTVbLW','Bearer\x20','userinfo','pterodactyl','renewsuspendsystem','post','client','disk','failedmodifyserver','&err=MISSINGVARIABLE','?err=BIGSERVERNAME','username','relationships','attributes'];_0x55f1=function(){return _0x20146c;};return _0x55f1();}function hexToDecimal(_0x33dab5){const _0x45b531=_0x17a1e3;return parseInt(_0x33dab5[_0x45b531(0x17f)]('#',''),0x10);}